{% extends "layout.html" %}
{% block content %}

<body class="fixed-sn white-skin">

    <!--Main Navigation-->
    <header>

        <!--Navbar-->
        <nav class="navbar fixed-top navbar-expand-lg scrolling-navbar double-nav">
            <!-- SideNav slide-out button -->
            <div class="float-left">
                <a href="#" data-activates="slide-out" class="button-collapse black-text"><i class="fa fa-bars"></i></a>
            </div>
            <!-- Breadcrumb-->
            <div class="breadcrumb-dn mr-auto">
                <p>MESA Everyday</p>
            </div>

            <!--Navbar links-->
            <ul class="nav navbar-nav nav-flex-icons ml-auto">

                <!-- Dropdown -->
                <li class="nav-item dropdown notifications-nav">
                    <a class="nav-link dropdown-toggle waves-effect" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        {% if number_upcoming > 0 %}
                            <span class="badge red">{{number_upcoming}}</span> <i class="fa fa-bell"></i>
                        {% endif %}
                        <span class="d-none d-md-inline-block">Notifications</span>
                    </a>

                    <div class="dropdown-menu dropdown-info" aria-labelledby="navbarDropdownMenuLink">
                        {% if number_upcoming > 0 %}
                            {% for event in upcoming_events %}
                                <a class="dropdown-item" href="#">
                                    <i class="fa fa-times-rectangle mr-2" aria-hidden="true"></i>
                                    <span> {{ event['summary'] }} </span>
                                    <span class="float-right"><i class="fa fa-clock-o" aria-hidden="true"></i>
                                        {{ event['remain_days'] }} days
                                    </span>
                                </a>
                            {% endfor %}
                        {% else %}
                            <a class="dropdown-item" href="#">
                                <i class="fa fa-times-rectangle mr-2" aria-hidden="true"></i>
                                <span> No Events </span>
                                <span class="float-right">
                                    <i class="fa fa-clock-o" aria-hidden="true"></i>
                                    0 days
                                </span>
                            </a>
                        {% endif %}
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link waves-effect"><i class="fa fa-envelope"></i> <span class="clearfix d-none d-sm-inline-block">Inbox</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link waves-effect" href="https://calendar.google.com/calendar/embed?src=bartlett%40pdx.edu&ctz=America%2FLos_Angeles">
                        <i class="fa fa-calendar"></i>
                        <span class="clearfix d-none d-sm-inline-block">Calendar</span>
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle waves-effect" href="#" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-user"></i> <span class="clearfix d-none d-sm-inline-block">Profile</span></a>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                        <a class="dropdown-item" href="{{ url_for('logout') }}">Log Out</a>
                        <a class="dropdown-item" href="#">My account</a>
                    </div>
                </li>

            </ul>
            <!--/Navbar links-->
        </nav>
        <!--/.Navbar-->

        <!-- Sidebar navigation -->
        <div id="slide-out" class="side-nav sn-bg-4 fixed">
            <ul class="custom-scrollbar">
                <!-- Logo -->
                <li class="logo-sn waves-effect">
                    <div class="text-center">
                        <a href="#" class="pl-0"><img src="../static/img/mesa.png" class=""></a>
                    </div>
                </li>
                <!--/. Logo -->

                <!--Search Form-->
                <li>
                    <form class="search-form" role="search">
                        <div class="form-group md-form mt-0 pt-1 waves-light">
                            <input type="text" class="form-control" placeholder="Search">
                        </div>
                    </form>
                </li>
                <!--/.Search Form-->
                <!-- Side navigation links -->
                <li>
                    <ul class="collapsible collapsible-accordion">
                        <li><a class="collapsible-header waves-effect arrow-r"><i class="fa fa-tachometer"></i>
                                Dashboards</a>
                        </li>
                        <li><a class="collapsible-header waves-effect arrow-r"><i class="fa fa-photo"></i> Get Stamp</a>
                        </li>
                        <li><a class="collapsible-header waves-effect arrow-r"><i class="fa fa-user"></i> View Progress<i
                                    class="fa fa-angle-down rotate-icon"></i></a>
                            <div class="collapsible-body">
                                <ul>
                                    {% for r in result %}
                                        <li><a href="" class="waves-effect">{{ r }}</a></li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </li>
                    </ul>
                </li>
                <!--/. Side navigation links -->
            </ul>
            <div class="sidenav-bg mask-strong"></div>
        </div>
        <!--/. Sidebar navigation -->
    </header>
    <!--Main Navigation-->

    <!--Main layout-->
    <main>

        <div class="container-fluid">

            <!-- First row -->

            <div class="row">

                <!-- First column -->

                <div class="col-lg-8 col-md-12">

                    <!--Panel-->
                    <div class="card mb-4">
                        <div class="card-header white-text primary-color">
                            Badge Information
                        </div>
                        <div class="card-body">
                            Main student badge content goes here

                            <button class="btn btn btn-flat grey lighten-3 btn-rounded waves-effect font-weight-bold dark-grey-text float-right">View full report</button>

                        </div>
                    </div>
                    <!--/.Panel-->

                    <!-- Panel -->

                    <div class="card mb-4">
                        <div class="card-header white-text primary-color">
                            Users activity
                        </div>
                        <div class="card-body">
                            <table>
                                <tr><td>Time Until First Event!!!<td></tr>
                                <tr><td><span id="clock" data-date-string={{events[0][ 'date_string' ]}}></span></td></tr>
                            </table>
                        </div>
                    </div>

                    <!-- /.Panel -->

                </div>

                <!-- /.First column -->

                <div class="col-lg-4 col-md-12">

                    <!--Panel-->
                    <div class="card mb-4" id='calendar-div'>
                        <div class="card-header white-text primary-color">
                            Calendar
                        </div>
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe class="cal-iframe embed-responsive-item" id='cv_if5' src='http://cdn.instantcal.com/cvir.html?id=cv_nav5&file=https://calendar.google.com/calendar/ical/bartlett%40pdx.edu/public/basic.ics&theme=BL&ccolor=%23ffffc0&dims=1&gtype=cv_monthgrid&gcloseable=0&gnavigable=1&gperiod=month&itype=cv_simpleevent'
                                allowTransparency=true scrolling='no' frameborder=0 height=auto width=100%></iframe>
                        </div>
                    </div>
                    <!--/.Panel-->

                    <!--Panel-->
                    <div class="card mb-4">
                        <div class="card-header white-text primary-color">
                            Upcoming Events
                        </div>
                        <div class="card-body">
                            <table>
                                <tr><td>--Events--</td></tr>
                                {% for event in events[:10] %}
                                    <tr>
                                        <table>
                                            {% if event['remain_days'] < 15 %} 
                                                <tr>
                                                    <td>{{event['summary']}} in {{event['remain_days']}} days ({{event['calColor']}} : {{event['mesaColor']}})</td>
                                                </tr>
                                                <tr>
                                                    <td>on {{event['start_string']}}</td>
                                               </tr>
                                                <tr>
                                                    <td>or {{event['date_string']}}</td>
                                                </tr>
                                               <tr>
                                                    <td>at {{event['location']}}</td>
                                                </tr>
                                                <tr>
                                                    <td>--</td>
                                                </tr>
                                            {% endif %}
                                        </table>
                                    </tr>
                                {% endfor %}
                                <tr>--Events--</tr>
                                <div></div>
                                <tr>--Mesa Events--</tr>
                                {% for event in mesa_days %}
                                    <tr>
                                        <table>
                                            <tr>
                                                <td>{{event['summary']}}</td>
                                            </tr>
                                            <tr>
                                                <td>on {{event['start_string']}}</td>
                                            </tr>
                                            <tr>
                                                <td>--</td>
                                            </tr>
                                        </table>
                                    </tr>
                                {% endfor %}
                                <tr>--Mesa Events--</tr>
                            </table>

                            <button class="btn btn btn-flat grey lighten-3 btn-rounded waves-effect font-weight-bold dark-grey-text float-right">View
                                full upcoming events</button>
                        </div>
                    </div>
                    <!--/.Panel-->
                </div>
                <!-- /.Second row -->
            </div>
    </main>
    <!--Main layout-->

    <!--Footer-->
    <footer class="page-footer pt-0 mt-5 rgba-stylish-light">

        <!--Copyright-->
        <div class="footer-copyright py-3 text-center">
            <div class="container-fluid">
                <a> MESA Office Contact Information </a>
            </div>
        </div>
        <!--/.Copyright-->

    </footer>
    <!--/.Footer-->
    {% endblock content %}
